{
	"Scaffold QuantityIndicator PCF": {
		"scope": "powershell",
		"prefix": "GFZ01-scaffold-quantity-indicator-pcf",
		"body": [
			"#",
			"# ╔════════════════════════════════════════════════════════════════════════════════════════╗",
			"# ║                  GFZ01: Scaffold QuantityIndicator PCF control (field)                  ║",
			"# ╚════════════════════════════════════════════════════════════════════════════════════════╝",
			"# This snippet scaffolds a Dataverse field PCF control named QuantityIndicator.",
			"# It runs `pac pcf init` under namespace UdppControls, seeds placeholders so",
			"# and opens key files for editing.",
			"# Finally, it links the .pcfproj into Solutions.UI so the control",
			"# is packaged with the UI solution.",
			"# ──────────────────────────────────────────────────────────────────────────────────────────",
			"#                                        Commands",
			"# ──────────────────────────────────────────────────────────────────────────────────────────",
			"# Step 1: Init PCF control structure",
			"mkdir src/Controls.QuantityIndicator",
			"cd src/Controls.QuantityIndicator",
			"",
			"pac pcf init --namespace UdppControls --name QuantityIndicator --template field",
			"",
			"# Step 2: Install npm dependencies",
			"npm install",
			"",
			"# Step 3: Create css folder + placeholder files (for CFZ02–CFZ04 snippets)",
			"mkdir QuantityIndicator/css",
			"New-Item -Path . -Name \"QuantityIndicator/css/QuantityIndicator.css\" -ItemType \"File\" | Out-Null",
			"",
			"\"<!-- type CFZ02 and then press control+space to trigger suggestions of snippets -->\" | Out-File -FilePath \"QuantityIndicator/ControlManifest.Input.xml\"",
			"\"/* type CFZ03 and then press control+space to trigger suggestions of snippets */\" | Out-File -FilePath \"QuantityIndicator/css/QuantityIndicator.css\"",
			"\"// type CFZ04 and then press control+space to trigger suggestions of snippets \" | Out-File -FilePath \"QuantityIndicator/index.ts\"",
			"",
			"# Step 4: Open key files in VS Code",
			"code QuantityIndicator/ControlManifest.Input.xml",
			"code QuantityIndicator/index.ts",
			"",
			"# Step 5: Link PCF project into Solutions.UI",
			"cd ../..",
			"cd src/Solutions.UI",
			"dotnet add reference ../Controls.QuantityIndicator/Controls.QuantityIndicator.pcfproj",
			"cd ../.."
		]
	},
	"QuantityIndicator manifest.xml": {
		"prefix": "GFZ02-quantity-indicator-manifest-xml",
		"scope": "xml",
		"body": [
			"<?xml version=\"1.0\" encoding=\"utf-8\" ?>",
			"<manifest>",
			"  <control namespace=\"UdppControls\"",
			"           constructor=\"QuantityIndicator\"",
			"           version=\"0.0.2\"",
			"           display-name-key=\"Quantity Indicator\"",
			"           description-key=\"A colorful badge indicator for quantity fields\"",
			"           control-type=\"standard\">",
			"",
			"    <external-service-usage enabled=\"false\">",
			"    </external-service-usage>",
			"",
			"    <property name=\"quantity\"",
			"              display-name-key=\"Quantity\"",
			"              description-key=\"The quantity value to display\"",
			"              of-type=\"Whole.None\"",
			"              usage=\"bound\"",
			"              required=\"true\" />",
			"",
			"    <resources>",
			"      <code path=\"index.ts\" order=\"1\" />",
			"      <css path=\"css/QuantityIndicator.css\" order=\"1\" />",
			"    </resources>",
			"  </control>",
			"</manifest>"
		]
	},
	"Quantity badge CSS": {
		"prefix": "GFZ03-quantity-badge-css",
		"scope": "css",
		"body": [
			".quantity-badge-wrapper {",
			"    display: inline-flex;",
			"    align-items: center;",
			"    gap: 8px;",
			"    width: 100%;",
			"    height: 100%;",
			"    min-height: 32px;",
			"    font-family: \"Segoe UI\", Tahoma, Geneva, Verdana, sans-serif;",
			"}",
			"",
			".quantity-badge__input {",
			"    flex: 1;",
			"    height: 32px;",
			"    padding: 4px 8px;",
			"    font-size: 14px;",
			"    border: 1px solid #a0a0a0;",
			"    border-radius: 4px;",
			"    outline: none;",
			"    box-sizing: border-box;",
			"    -moz-appearance: textfield;",
			"}",
			"",
			".quantity-badge__input::-webkit-inner-spin-button,",
			".quantity-badge__input::-webkit-outer-spin-button {",
			"    -webkit-appearance: none;",
			"    margin: 0;",
			"}",
			"",
			".quantity-badge__input:focus {",
			"    border-color: #2266e3;",
			"    box-shadow: 0 0 0 1px #2266e3;",
			"}",
			"",
			".quantity-badge__input--disabled {",
			"    background-color: #f3f3f3;",
			"    color: #666;",
			"    cursor: not-allowed;",
			"}",
			"",
			".quantity-badge {",
			"    display: inline-flex;",
			"    align-items: center;",
			"    justify-content: center;",
			"    width: 28px;",
			"    height: 28px;",
			"    border-radius: 50%;",
			"    font-size: 14px;",
			"    flex-shrink: 0;",
			"}",
			"",
			".quantity-badge--red {",
			"    background-color: #fdecea;",
			"    color: #c0392b;",
			"    border: 2px solid #e74c3c;",
			"}",
			"",
			".quantity-badge--yellow {",
			"    background-color: #fef9e7;",
			"    color: #b7791f;",
			"    border: 2px solid #f39c12;",
			"}",
			"",
			".quantity-badge--green {",
			"    background-color: #eafaf1;",
			"    color: #1e8449;",
			"    border: 2px solid #2ecc71;",
			"}"
		]
	},
	"QuantityIndicator PCF TS": {
		"prefix": "GFZ04-quantity-indicator-ts",
		"scope": "typescript",
		"body": [
			"import { IInputs, IOutputs } from \"./generated/ManifestTypes\";",
			"",
			"export class QuantityIndicator",
			"    implements ComponentFramework.StandardControl<IInputs, IOutputs>",
			"{",
			"    private _container: HTMLDivElement;",
			"    private _input: HTMLInputElement;",
			"    private _badge: HTMLSpanElement;",
			"    private _badgeIcon: HTMLSpanElement;",
			"    private _value: number | null;",
			"    private _notifyOutputChanged: () => void;",
			"",
			"    constructor() {",
			"        // noop",
			"    }",
			"",
			"    public init(",
			"        context: ComponentFramework.Context<IInputs>,",
			"        notifyOutputChanged: () => void,",
			"        _state: ComponentFramework.Dictionary,",
			"        container: HTMLDivElement",
			"    ): void {",
			"        this._notifyOutputChanged = notifyOutputChanged;",
			"        this._container = container;",
			"",
			"        const wrapper = document.createElement(\"div\");",
			"        wrapper.classList.add(\"quantity-badge-wrapper\");",
			"",
			"        // Editable input",
			"        this._input = document.createElement(\"input\");",
			"        this._input.type = \"number\";",
			"        this._input.classList.add(\"quantity-badge__input\");",
			"        this._input.addEventListener(\"change\", this._onInputChange.bind(this));",
			"        this._input.addEventListener(\"input\", this._onInputLive.bind(this));",
			"",
			"        // Color badge icon",
			"        this._badgeIcon = document.createElement(\"span\");",
			"        this._badgeIcon.classList.add(\"quantity-badge__icon\");",
			"",
			"        // Color badge",
			"        this._badge = document.createElement(\"span\");",
			"        this._badge.classList.add(\"quantity-badge\");",
			"",
			"        wrapper.appendChild(this._input);",
			"        wrapper.appendChild(this._badge);",
			"        this._container.appendChild(wrapper);",
			"",
			"        this._setValue(context.parameters.quantity.raw);",
			"    }",
			"",
			"    public updateView(context: ComponentFramework.Context<IInputs>): void {",
			"        const incoming = context.parameters.quantity.raw;",
			"        if (incoming !== this._value) {",
			"            this._setValue(incoming);",
			"        }",
			"",
			"        // Respect disabled state from the form",
			"        const isDisabled = context.mode.isControlDisabled;",
			"        this._input.disabled = isDisabled;",
			"        if (isDisabled) {",
			"            this._input.classList.add(\"quantity-badge__input--disabled\");",
			"        } else {",
			"            this._input.classList.remove(\"quantity-badge__input--disabled\");",
			"        }",
			"    }",
			"",
			"    public getOutputs(): IOutputs {",
			"        return { quantity: this._value ?? undefined };",
			"    }",
			"",
			"    public destroy(): void {",
			"        // noop",
			"    }",
			"",
			"    private _onInputChange(): void {",
			"        const parsed = parseInt(this._input.value, 10);",
			"        this._value = isNaN(parsed) ? null : parsed;",
			"        this._updateBadge(this._value);",
			"        this._notifyOutputChanged();",
			"    }",
			"",
			"    private _onInputLive(): void {",
			"        const parsed = parseInt(this._input.value, 10);",
			"        this._updateBadge(isNaN(parsed) ? null : parsed);",
			"    }",
			"",
			"    private _setValue(raw: number | null): void {",
			"        this._value = raw;",
			"        this._input.value = raw != null ? raw.toString() : \"\";",
			"        this._updateBadge(raw);",
			"    }",
			"",
			"    private _updateBadge(val: number | null): void {",
			"        const tier = this._getTier(val);",
			"        this._badge.className = \"quantity-badge\";",
			"        this._badge.classList.add(`quantity-badge--${tier.color}`);",
			"        this._badge.textContent = tier.icon;",
			"    }",
			"",
			"    private _getTier(val: number | null): { color: string; icon: string } {",
			"        if (val == null || val <= 0) return { color: \"red\", icon: \"\\u26A0\" };",
			"        if (val <= 2) return { color: \"yellow\", icon: \"\\u25CF\" };",
			"        return { color: \"green\", icon: \"\\u2714\" };",
			"    }",
			"}"
		]
	}
}
